<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../simple-material-table.html">

<dom-module id="demo-simple">
  <style>
    :host {
      display: block;
    }
  </style>
  <template>
    <simple-material-table id="demo" title="Test Table" columns="[[columns]]" table-data="[[tableData]]"
      on-row-selected="_onRowSelected"
      on-action-add="_onActionAdd"
      on-action-edit="_onActionEdit"
      on-action-delete="_onActionDelete"
      show-action-add
      show-action-delete>
    </simple-material-table>
  </template>
  <script>
    Polymer({
      is: 'demo-simple',

      _onRowSelected: function(data){
        console.log('_onRowSelected',data);
      },

      _onActionAdd: function(){
        console.log('_onActionAdd');
        this.push('tableData',{sensor:'X',value: this.tableData.length,rawValue:this.tableData.length});
      },

      _onActionEdit: function(data){
        console.log('_onActionEdit',data);
      },

      _onActionDelete: function(data){
        console.log('_onActionDelete',data);
      },

      ready: function() {
        this.columns = [{
          title: "Sensor",
          number: false,
          column: 'sensor',
          hidden: false

        }, {
          title: "Value",
          number: true,
          column: 'value',
          formatter: function(value){
            return parseFloat(value).toFixed(2);
          },
          hidden: false

        }, {
          title: "Raw Value",
          number: true,
          column: 'rawValue',
          formatter: function(value){
            return parseFloat(value).toFixed(0);
          },
          hidden: true
        }, ];

        this.tableData =
        [
            {
                "sensor": "T",
                "value": 3.437,
                "rawValue": "3437"
            },
            {
                "sensor": "H",
                "value": 86.5,
                "rawValue": "8650"
            },
            {
                "sensor": "V",
                "value": 3.309,
                "rawValue": "3309"
            },
            {
                "sensor": "B",
                "value": 1020.26,
                "rawValue": "102026"
            },
            {
                "sensor": "L",
                "value": 2,
                "rawValue": "2"
            },
            {
                "sensor": "R",
                "value": 0,
                "rawValue": "0"
            },
            {
                "sensor": "S",
                "value": 0,
                "rawValue": "0"
            },
            {
                "sensor": "G",
                "value": 0,
                "rawValue": "0"
            },
            {
                "sensor": "A",
                "value": 0,
                "rawValue": "0"
            },
            {
                "sensor": "T",
                "value": 3.437,
                "rawValue": "3437"
            },
            {
                "sensor": "H",
                "value": 86.9,
                "rawValue": "8690"
            },
            {
                "sensor": "V",
                "value": 3.309,
                "rawValue": "3309"
            },
            {
                "sensor": "B",
                "value": 1020.18,
                "rawValue": "102018"
            },
            {
                "sensor": "L",
                "value": 2,
                "rawValue": "2"
            },
            {
                "sensor": "R",
                "value": 0,
                "rawValue": "0"
            },
            {
                "sensor": "S",
                "value": 0,
                "rawValue": "0"
            },
            {
                "sensor": "G",
                "value": 0,
                "rawValue": "0"
            },
            {
                "sensor": "A",
                "value": 0,
                "rawValue": "0"
            },
            {
                "sensor": "T",
                "value": 3.5,
                "rawValue": "3500"
            },
            {
                "sensor": "H",
                "value": 86.4,
                "rawValue": "8640"
            },
            {
                "sensor": "V",
                "value": 3.309,
                "rawValue": "3309"
            },
            {
                "sensor": "B",
                "value": 1020.21,
                "rawValue": "102021"
            },
            {
                "sensor": "L",
                "value": 2,
                "rawValue": "2"
            },
            {
                "sensor": "R",
                "value": 0,
                "rawValue": "0"
            },
            {
                "sensor": "S",
                "value": 0,
                "rawValue": "0"
            },
            {
                "sensor": "G",
                "value": 0,
                "rawValue": "0"
            },
            {
                "sensor": "A",
                "value": 0,
                "rawValue": "0"
            }
        ];

      window.setInterval(function(){
        for(var i = 0; i < this.tableData.length; i++){
          this.set(['tableData',i,'value'],this.tableData[i].value + 0.10);
        }
      }.bind(this),1000);
    },

    });
  </script>
</dom-module>
